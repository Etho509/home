<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Colour Mixer Test Card</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 800px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: left;
    }
    .swatch {
      width: 20px;
      height: 20px;
      display: inline-block;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Colour Mixer Test Card</h1>
  <p>This page runs a set of predefined target colours through the mixer and displays the results. It is intended for manual inspection.</p>
  <table>
    <thead>
      <tr>
        <th>Target</th>
        <th>Target Swatch</th>
        <th>Match Hex</th>
        <th>Match Swatch</th>
        <th>ΔE</th>
        <th>Steps</th>
      </tr>
    </thead>
    <tbody id="results"></tbody>
  </table>
  <script src="mixing.js"></script>
  <script>
    const targets = [
      '#AE2D26', '#FBD53C', '#5D7B16', '#3B43A8', '#8731B6', '#169A9A', '#F67E1D', '#F089A8', '#39B1D7', '#7EC51F'
    ];
    const tableBody = document.getElementById('results');
    function rgbToHex(rgb) {
      return (
        '#' +
        [rgb.r, rgb.g, rgb.b]
          .map((v) => v.toString(16).padStart(2, '0'))
          .join('')
          .toUpperCase()
      );
    }
    function run() {
      targets.forEach((hex) => {
        const res = Mixer.search(hex, {
          depth: 3,
          beamWidth: 50,
          earlyStop: 0,
          deltaECutoff: 20,
          snap: false,
          twoStep: false,
          irl: false
        });
        const matchHex = rgbToHex(res.colour);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${hex}</td>
          <td><span class="swatch" style="background:${hex}"></span></td>
          <td>${matchHex}</td>
          <td><span class="swatch" style="background:${matchHex}"></span></td>
          <td>${res.deltaE.toFixed(2)}</td>
          <td>${res.sequence.join(', ') || '—'}</td>
        `;
        tableBody.appendChild(row);
      });
    }
    run();
  </script>
</body>
</html>